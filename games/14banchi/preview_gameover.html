<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>ゲームオーバー画面プレビュー</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{width:100%;height:100%;overflow:hidden;background:#000}
canvas{display:block;width:100%;height:100%}
</style>
</head>
<body>
<canvas id="gc"></canvas>
<script>
const C=document.getElementById('gc'),X=C.getContext('2d');
let W=window.innerWidth,H=window.innerHeight;
C.width=W;C.height=H;
window.addEventListener('resize',()=>{W=window.innerWidth;H=window.innerHeight;C.width=W;C.height=H});

const deathImg=new Image();
deathImg.src='piyo02.png';
let fc=0;

function render(){
  fc++;
  X.clearRect(0,0,W,H);

  // Background
  X.fillStyle='#0A0000';X.fillRect(0,0,W,H);

  // Blood drip effect
  for(let i=0;i<20;i++){
    const dx=((fc*0.3+i*73)%W);
    const dy=((fc*0.5+i*131)%(H*0.6));
    X.fillStyle=`rgba(120,0,0,${0.15+Math.sin(fc*0.02+i)*0.1})`;
    X.fillRect(dx,0,2,dy);
  }

  // Vignette
  const vg=X.createRadialGradient(W/2,H/2,W*0.1,W/2,H/2,W*0.6);
  vg.addColorStop(0,'transparent');
  vg.addColorStop(1,'rgba(0,0,0,0.7)');
  X.fillStyle=vg;X.fillRect(0,0,W,H);

  // Draw death image - large, right-aligned like title/clear screens
  if(deathImg.complete&&deathImg.naturalWidth){
    const ih=H*0.85;
    const iw=ih*(deathImg.naturalWidth/deathImg.naturalHeight);
    const ix=W*0.65-iw/2;
    const iy=H*0.5-ih/2;

    X.drawImage(deathImg,ix,iy,iw,ih);

    // Fade edges into background - top
    const fadeT=X.createLinearGradient(0,iy,0,iy+ih*0.18);
    fadeT.addColorStop(0,'#0A0000');
    fadeT.addColorStop(1,'transparent');
    X.fillStyle=fadeT;X.fillRect(ix-10,iy,iw+20,ih*0.18);

    // Fade edges - bottom
    const fadeB=X.createLinearGradient(0,iy+ih*0.82,0,iy+ih);
    fadeB.addColorStop(0,'transparent');
    fadeB.addColorStop(1,'#0A0000');
    X.fillStyle=fadeB;X.fillRect(ix-10,iy+ih*0.82,iw+20,ih*0.18);

    // Fade edges - left
    const fadeL=X.createLinearGradient(ix,0,ix+iw*0.2,0);
    fadeL.addColorStop(0,'#0A0000');
    fadeL.addColorStop(1,'transparent');
    X.fillStyle=fadeL;X.fillRect(ix,iy,iw*0.2,ih);

    // Fade edges - right
    const fadeR=X.createLinearGradient(ix+iw*0.8,0,ix+iw,0);
    fadeR.addColorStop(0,'transparent');
    fadeR.addColorStop(1,'#0A0000');
    X.fillStyle=fadeR;X.fillRect(ix+iw*0.8,iy,iw*0.2,ih);
  }

  // Main text
  const pulse=0.7+Math.sin(fc*0.06)*0.3;
  X.save();
  X.shadowColor='#FF0000';X.shadowBlur=20;
  X.fillStyle=`rgba(200,20,20,${pulse})`;
  X.font='bold 42px serif';X.textAlign='center';
  X.fillText('グエー死んだンゴ',W*0.3,H*0.25);
  X.shadowBlur=0;X.shadowColor='transparent';
  X.restore();

  // Sub text
  X.fillStyle='#882222';X.font='16px sans-serif';X.textAlign='center';
  X.fillText('2番地でぴよ氏は力尽きた…',W*0.3,H*0.40);

  // Tap to continue
  const tapA=0.3+Math.sin(fc*0.05)*0.7;
  X.fillStyle=`rgba(150,80,80,${Math.max(0,tapA)})`;
  X.font='14px sans-serif';X.textAlign='center';
  X.fillText('タップしてタイトルへ',W*0.3,H*0.88);

  requestAnimationFrame(render);
}
render();
</script>
</body>
</html>
